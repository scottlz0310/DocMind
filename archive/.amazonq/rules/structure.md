# プロジェクト構造

## ディレクトリ構成

```
docmind/
├── main.py                 # アプリケーションエントリーポイント
├── requirements.txt        # Python依存関係
├── README.md              # プロジェクトドキュメント
├── LICENSE                # MITライセンス
├── .gitignore             # Git無視パターン
├── venv/                  # 仮想環境（gitに含まれない）
├── src/                   # ソースコード
│   ├── __init__.py
│   ├── gui/               # PySide6 GUIコンポーネント
│   │   ├── __init__.py
│   │   ├── main_window.py
│   │   ├── folder_tree.py
│   │   ├── search_results.py
│   │   └── preview_widget.py
│   ├── core/              # ビジネスロジック
│   │   ├── __init__.py
│   │   ├── search_manager.py
│   │   ├── index_manager.py
│   │   ├── embedding_manager.py
│   │   ├── document_processor.py
│   │   └── file_watcher.py
│   ├── data/              # データアクセス層
│   │   ├── __init__.py
│   │   ├── database.py
│   │   ├── models.py
│   │   └── storage.py
│   └── utils/             # ユーティリティ関数
│       ├── __init__.py
│       ├── config.py
│       ├── logging_config.py
│       └── exceptions.py
├── tests/                 # テストスイート
│   ├── __init__.py
│   ├── test_search.py
│   ├── test_indexing.py
│   ├── test_document_processing.py
│   └── fixtures/          # テストデータ
├── docs/                  # ドキュメント
│   ├── DocuMind.txt       # 元の仕様書
│   └── docmind-local-search/  # 実装ドキュメント
└── docmind_data/          # ランタイムデータ（gitに含まれない）
    ├── documents.db       # SQLiteデータベース
    ├── embeddings.pkl     # キャッシュされた埋め込み
    ├── whoosh_index/      # 検索インデックス
    ├── models/            # AIモデルキャッシュ
    └── logs/              # アプリケーションログ
```

## 主要規約

### ファイル命名
- Pythonファイルとディレクトリにはsnake_caseを使用
- コンポーネントの目的を示す説明的な名前を使用
- モジュール名は短く明確に保つ

### インポート構成
- 標準ライブラリのインポートを最初に
- サードパーティのインポートを次に
- ローカルアプリケーションのインポートを最後に
- src/ルートからの絶対インポートを使用

### コード構成
- **GUI層**: すべてのPySide6コンポーネントを`src/gui/`に
- **ビジネスロジック**: コア機能を`src/core/`に
- **データ層**: データベースとストレージを`src/data/`に
- **ユーティリティ**: 共有ユーティリティを`src/utils/`に

### 設定管理
- アプリケーション設定は`src/utils/config.py`に
- 環境固有の設定は別ファイルに
- デフォルトデータディレクトリ: `./docmind_data/`

### エラーハンドリング
- カスタム例外は`src/utils/exceptions.py`に
- アプリケーション全体で一貫したエラーログ
- 非クリティカルな障害に対する優雅な劣化

### テスト構造
- tests/でソース構造をミラー
- テストフレームワークにpytestを使用
- エンドツーエンドワークフローの統合テストを含む
- 専用fixtures/ディレクトリにテストフィクスチャ

## モジュール責任

### GUIコンポーネント（`src/gui/`）
- ユーザーインターフェースの相互作用を処理
- 検索結果とドキュメントプレビューを表示
- アプリケーションウィンドウとダイアログを管理
- ビジネスロジックなし - コアコンポーネントに委譲

### コアビジネスロジック（`src/core/`）
- 検索アルゴリズムとインデックスを実装
- ドキュメント処理とテキスト抽出を処理
- AIモデル操作と埋め込みを管理
- 異なるシステムコンポーネント間の調整

### データアクセス（`src/data/`）
- データベース操作とスキーマ管理
- ファイルシステム操作とデータ永続化
- モデル定義とデータ構造
- 将来の拡張性のための抽象ストレージインターフェース

### ユーティリティ（`src/utils/`）
- アプリケーション設定と設定
- ログセットアップと管理
- カスタム例外定義
- 共有ヘルパー関数

## 開発ワークフロー

1. **セットアップ**: 仮想環境を作成し依存関係をインストール
2. **実装**: コアコンポーネントから開始、その後GUI
3. **テスト**: 実装と並行してテストを記述
4. **統合**: 明確に定義されたインターフェースを通じてコンポーネントを接続
5. **パフォーマンス**: ターゲットパフォーマンスメトリクスに最適化

## 将来の拡張性

この構造は将来の拡張をサポートします：
- プラガブル検索プロバイダーを通じたAPI統合
- 追加のファイル形式プロセッサー
- 拡張されたGUIコンポーネント
- 分散処理機能
- クラウドストレージバックエンド

## 日本語開発規約

### コメント規約
- すべてのクラス、関数、メソッドに日本語docstringを記述
- インラインコメントは日本語で説明
- 複雑なロジックには詳細な日本語コメントを追加

### ドキュメント規約
- README、設計書、仕様書は日本語で記述
- APIドキュメントは日本語で生成
- コードレビューコメントは日本語で記述

### エラーメッセージ規約
- ユーザー向けエラーメッセージは日本語で表示
- ログメッセージは日本語で記録
- 例外メッセージは日本語で定義