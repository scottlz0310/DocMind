# 実装タスクリスト

## 概要

このタスクリストは、DocMindアプリケーションの「見た目だけ」のインデックス処理を、実際にファイルを処理してインデックスを作成する機能に変更するための実装手順を定義します。既存のDocumentProcessorとIndexManagerを活用し、新しいIndexingWorkerコンポーネントを作成して、バックグラウンドでの非同期処理を実現します。

## タスク一覧

- [x] 1. IndexingWorkerクラスの基本実装
  - QObjectを継承したワーカークラスを作成
  - 必要なシグナル（progress_updated, file_processed, indexing_completed, error_occurred）を定義
  - 基本的なコンストラクタとプロパティを実装
  - _要件: 1.1, 2.1, 3.1_

- [x] 2. ファイルスキャン機能の実装
  - フォルダ内のファイルを再帰的にスキャンする機能を実装
  - サポートされているファイル形式のフィルタリング機能を追加
  - ファイル数のカウントと進捗計算機能を実装
  - _要件: 1.1, 1.2, 6.3_

- [x] 3. 単一ファイル処理機能の実装
  - DocumentProcessorを使用してファイルからテキストを抽出する機能を実装
  - ファイル処理エラーのハンドリングと継続処理を実装
  - 処理済みファイルの統計情報収集機能を実装
  - _要件: 1.3, 1.5, 5.1, 5.2_

- [x] 4. インデックス追加機能の実装
  - IndexManagerを使用してドキュメントをWhooshインデックスに追加する機能を実装
  - バッチ処理によるパフォーマンス最適化を実装
  - インデックス作成エラーのハンドリングを実装
  - _要件: 2.1, 2.2, 2.4, 6.1_

- [x] 5. 進捗報告とシグナル発行機能の実装
  - 処理段階に応じた進捗メッセージの生成機能を実装
  - ファイル処理完了時のシグナル発行機能を実装
  - 全体完了時の統計情報生成とシグナル発行機能を実装
  - _要件: 3.2, 3.3, 3.4_

- [x] 6. MainWindowのインデックス処理統合
  - _on_folder_indexedメソッドのプレースホルダー実装を削除
  - IndexingWorkerを作成して実際のインデックス処理を開始する機能を実装
  - ワーカーのシグナルをUIの進捗表示に接続する機能を実装
  - _要件: 3.1, 3.2, 3.3_

- [x] 7. バックグラウンドスレッド管理の実装
  - QThreadを使用したワーカーのスレッド実行機能を実装
  - スレッドの適切な開始・停止・クリーンアップ機能を実装
  - 複数の同時インデックス処理の制御機能を実装
  - _要件: 3.1, 3.5, 6.2_

- [x] 8. 実際の進捗表示機能の実装
  - 現在処理中のファイル名を表示する機能を実装
  - 処理済み/総ファイル数の進捗率表示機能を実装
  - 処理段階（スキャン中、処理中、インデックス作成中）の表示機能を実装
  - _要件: 3.2, 3.3_

- [x] 9. エラーハンドリングとログ機能の実装
  - ファイル処理エラーの記録と継続処理機能を実装
  - エラー統計の収集と報告機能を実装
  - 重大なエラー時のユーザー通知機能を実装
  - _要件: 5.1, 5.2, 5.3, 5.4_

- [x] 10. FileWatcher統合機能の実装
  - インデックス完了後のFileWatcher自動開始機能を実装
  - 監視対象フォルダの管理機能を実装
  - ファイル変更時の自動インデックス更新機能を実装
  - _要件: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 11. 統計情報とレポート機能の実装
  - インデックス処理完了時の詳細統計情報生成機能を実装
  - 処理時間、成功/失敗ファイル数の計算機能を実装
  - ユーザー向けの完了メッセージ生成機能を実装
  - _要件: 3.4, 6.5_

- [x] 12. パフォーマンス最適化機能の実装
  - 大量ファイル処理時のバッチサイズ調整機能を実装
  - メモリ使用量監視と制御機能を実装
  - 処理速度の動的調整機能を実装
  - _要件: 6.1, 6.2, 6.4_

- [x] 13. キャンセル機能の実装
  - ユーザーによる処理中断機能を実装
  - 部分的に作成されたインデックスの適切な処理機能を実装
  - キャンセル時のリソースクリーンアップ機能を実装
  - _要件: 3.5, 5.4_

- [x] 14. FolderTreeWidgetの状態管理改善
  - インデックス処理中の状態表示機能を実装（INDEXING状態の追加）
  - 処理完了後の状態更新機能を実装
  - エラー時の状態表示機能を実装
  - _要件: 1.1, 2.3_

- [x] 15. 進捗バー表示機能の改善
  - MainWindowの進捗バー表示機能を実装
  - 進捗バーの表示/非表示制御機能を実装
  - 進捗率の正確な計算と表示機能を実装
  - _要件: 3.2, 3.3_

- [x] 16. 統合テストとデバッグ機能の実装
  - エンドツーエンドのインデックス処理テスト機能を実装
  - 大量ファイルでのパフォーマンステスト機能を実装
  - エラーケースのテストとデバッグ機能を実装
  - _要件: 全要件の検証_
