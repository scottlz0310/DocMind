# 技術スタック

## コア技術

- **言語**: Python 3.11+
- **GUIフレームワーク**: クロスプラットフォームデスクトップインターフェース用PySide6
- **検索エンジン**: 全文検索インデックス用Whoosh
- **AI/ML**: セマンティック検索用sentence-transformers（all-MiniLM-L6-v2モデル）
- **データベース**: メタデータストレージ用SQLite
- **ファイル処理ライブラリ**:
  - PDFテキスト抽出用PyMuPDF
  - Wordドキュメント処理用python-docx
  - Excelファイル処理用openpyxl

## 主要依存関係

```
PySide6>=6.0.0
Whoosh>=2.7.4
sentence-transformers>=2.0.0
PyMuPDF>=1.20.0
python-docx>=0.8.11
openpyxl>=3.0.0
numpy>=1.21.0
```

## アーキテクチャパターン

- **レイヤードアーキテクチャ**: GUI、ビジネスロジック、データアクセス層の明確な分離
- **モジュラー設計**: 検索、インデックス、埋め込み、ファイル処理の独立コンポーネント
- **オブザーバーパターン**: 増分更新のためのファイルシステム監視
- **ストラテジーパターン**: プラガブル検索プロバイダー（ローカル vs 将来のAPI統合）

## データストレージ

- **documents.db**: ドキュメントメタデータと検索履歴用SQLiteデータベース
- **embeddings.pkl**: ドキュメント埋め込みのピクルキャッシュ
- **whoosh_index/**: Whoosh全文検索インデックスファイルを含むディレクトリ
- **models/**: オフライン動作用のキャッシュされたsentence-transformersモデル

## 開発環境

- **仮想環境**: 依存関係分離のため`venv`を使用
- **プラットフォーム**: 主要ターゲットはWindows 10/11、将来的にmacOSサポート予定
- **パフォーマンス**: 5秒未満の検索時間で最大50,000ドキュメントの処理を想定

## 共通コマンド

これはPoC段階のため、実装開始後に以下のコマンドが関連します：

```bash
# 環境セットアップ
python -m venv venv
venv\Scripts\activate  # Windows
pip install -r requirements.txt

# アプリケーション実行
python main.py

# テスト実行（実装後）
python -m pytest tests/

# 実行ファイルビルド（将来）
python -m PyInstaller main.py
```

## コード品質基準

- すべての関数シグネチャに型ヒント
- カスタム例外階層による包括的エラーハンドリング
- デバッグと監視のためのログ設定
- モジュラーでテスト可能なコード構造
- 大規模ドキュメントコレクションのパフォーマンス最適化

## 日本語対応指針

- **コメント**: すべてのコードコメントは日本語で記述
- **ドキュメント**: 技術仕様書、API文書は日本語で作成
- **エラーメッセージ**: ユーザー向けエラーメッセージは日本語で表示
- **ログメッセージ**: デバッグログも日本語で記録
- **変数名**: 英語を使用するが、コメントで日本語説明を併記